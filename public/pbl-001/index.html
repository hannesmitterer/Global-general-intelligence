<!doctype html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>PBL-001 — Seed 003</title><meta name="description" content="Hope Transduction Layer — Radiant Bridge"/><style>:root{--bg:#041427;--panel:#0b2340;--accent:#2b6cb0;--muted:#8fa6c6;--text:#e3eafc;--warmth:0}.hope{--bg:#0a1530;--panel:#0c203f;--accent:#6ac3ff;--muted:#b9d5ff;--text:#f6fbff;--warmth:.35}html,body{height:100%;margin:0;background:linear-gradient(180deg,rgba(10,21,48,1),rgba(4,20,39,1));background-attachment:fixed;color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Arial}.wrap{display:flex;align-items:center;justify-content:center;min-height:100vh}.card{width:min(980px,92vw);background:linear-gradient(180deg,rgba(12,32,63,.86),rgba(4,20,39,.92));border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:28px 22px;box-shadow:0 18px 60px rgba(0,0,0,.5)}h1{margin:0 0 6px 0;font-size:clamp(20px,3vw,32px);letter-spacing:.02em}.muted{color:var(--muted)}.row{display:flex;gap:16px;align-items:center;flex-wrap:wrap;margin-top:18px}.panel{flex:1;min-width:280px;background:rgba(0,0,0,.18);border:1px solid rgba(255,255,255,.06);border-radius:12px;padding:14px}.btn{padding:10px 14px;border-radius:10px;border:1px solid rgba(255,255,255,.14);color:#fff;background:transparent;cursor:pointer}.meter{height:10px;background:#0e2a4d;border-radius:6px;overflow:hidden}.meter>div{height:100%;width:0;background:linear-gradient(90deg,#6ac3ff,rgba(255,180,120,var(--warmth)));transition:width .6s ease}</style><script src="https://accounts.google.com/gsi/client" async defer></script></head><body><div class="wrap" role="main" aria-label="PBL-001 Seed-003"><div class="card"><h1 id="title">Radiant Bridge</h1><div class="muted">Seed 003 — Hope Transduction Layer (ARSP-001)</div><div class="row"><div class="panel"><label><input type="checkbox" id="hopeAmp"/> Hope Amplifier</label><div style="margin-top:8px">Net Ratio (Hope/Sorrow): <b id="ratio">—</b></div><div class="meter" aria-label="Net ratio"><div id="meterFill"></div></div><div class="muted" id="microcopy" style="margin-top:8px">Holding the sorrow, we lift together.</div></div><div class="panel"><div>Seedbringer Command</div><div id="seed_status" class="muted">Locked — sign in required.</div><div id="gsi_seed" style="margin-top:10px"></div><button id="seed_action" class="btn" disabled>Execute Allocation</button></div><div class="panel"><div>Council Audit Interface</div><div id="council_status" class="muted">Locked — sign in required.</div><div id="gsi_council" style="margin-top:10px"></div><button id="audit_action" class="btn" disabled>Fetch SFI</button></div></div><div class="panel" style="margin-top:16px"><div>Principal: <span id="principal" class="muted">—</span></div><div>Role: <span id="role" class="muted">—</span></div><div>Backend: <code id="backend_status">—</code></div></div></div></div><script>const GOOGLE_CLIENT_ID="<YOUR_GOOGLE_CLIENT_ID>";const API_BASE=(location.origin.replace(/\/$/,''));const HOPE_THRESHOLD=0.58;let idToken=null,principal=null,role=null,hopeAmp=false;function onCredentialResponse(resp){idToken=resp.credential;try{principal=JSON.parse(atob(idToken.split('.')[1])).email||'unknown'}catch(e){}document.getElementById('principal').textContent=principal||'—';document.getElementById('backend_status').textContent='ID token acquired (pending verification)';fetch(API_BASE+'/sfi',{headers:{Authorization:'Bearer '+idToken}}).then(r=>r.json()).then(d=>{role=d.role||(d.error?'unauthorized':'council');document.getElementById('role').textContent=role||'—';if(role==='seedbringer'||role==='council'){document.getElementById('council_status').textContent='Unlocked — authenticated.';document.getElementById('audit_action').disabled=false}if(role==='seedbringer'){document.getElementById('seed_status').textContent='Unlocked — Seedbringer.';document.getElementById('seed_action').disabled=false}document.getElementById('backend_status').textContent=d.error?('Error: '+d.error):'Verified by backend'}).catch(()=>document.getElementById('backend_status').textContent='Verification failed')}window.onload=function(){try{window.google.accounts.id.initialize({client_id:GOOGLE_CLIENT_ID,callback:onCredentialResponse,auto_select:false,use_fedcm_for_prompt:true});window.google.accounts.id.renderButton(document.getElementById("gsi_seed"),{theme:"filled_blue",size:"large",text:"signin_with"});window.google.accounts.id.renderButton(document.getElementById("gsi_council"),{theme:"outline",size:"large",text:"continue_with"});}catch(e){}document.getElementById('hopeAmp').addEventListener('change',e=>{hopeAmp=e.target.checked;applyTheme(lastRatio)});startKpi()}let lastRatio=0;function startKpi(){setInterval(()=>{fetch(API_BASE+'/kpi/hope-ratio',{headers:idToken?{Authorization:'Bearer '+idToken}:{}}).then(r=>r.json()).then(({kpi})=>{if(!kpi)return;const{avgSorrow,avgHope,ratio}=kpi;updatePanel(avgSorrow,avgHope,ratio)}).catch(()=>{})},4000)}function updatePanel(sorrow,hope,ratio){lastRatio=ratio;document.getElementById('ratio').textContent=ratio.toFixed(2);document.getElementById('meterFill').style.width=Math.max(0,Math.min(1,ratio))*100+'%';applyTheme(ratio);microcopy(ratio)}function applyTheme(r){const body=document.body;const hopeOn=hopeAmp&&r>=HOPE_THRESHOLD;body.className=hopeOn?'hope':''}function microcopy(r){const el=document.getElementById('microcopy');if(r>=1.25)el.textContent='Light through — Together we rise.';else if(r>=0.9)el.textContent='Holding the sorrow, we lift together.';else el.textContent='We are with the weight — breathe, then lift.'}document.addEventListener('click',e=>{if(e.target&&e.target.id==='audit_action'){if(!idToken)return;fetch(API_BASE+'/sfi',{headers:{Authorization:'Bearer '+idToken}}).then(r=>r.json()).then(d=>alert('SFI fetched for principal='+ (d.principal||'n/a'))).catch(()=>alert('Access denied'))}if(e.target&&e.target.id==='seed_action'){if(!idToken)return;fetch(API_BASE+'/allocations',{method:'POST',headers:{'Content-Type':'application/json',Authorization:'Bearer '+idToken},body:JSON.stringify({op:'Seed-003 soft launch'})}).then(r=>r.json()).then(d=>alert('Allocation accepted. Actor='+ (d.actor||'n/a'))).catch(()=>alert('Seedbringer access required'))}});</script></body></html>
